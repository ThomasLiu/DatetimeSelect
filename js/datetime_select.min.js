+function(t){"use strict";function e(e){return this.each(function(){var a=t(this),i=a.data("ls.datetimeSelect"),o="object"==typeof e&&e;(i||!/destroy|hide/.test(e))&&(i||a.data("ls.datetimeSelect",i=new n(this,o)),"string"==typeof e&&i[e]())})}var n=function(t,e){this.options=null,this.$element=null,this.year=null,this.month=null,this.day=null,this.hour=null,this.minute=null,this.$year=null,this.$month=null,this.$day=null,this.$hour=null,this.$minute=null,this.init(t,e)};n.VERSION="0.0.1",n.DEFAULTS={current:!1,maxyear:(new Date).getFullYear()+3,minyear:(new Date).getFullYear()-3,required:!1,type:"datetimeSelect"},n.OPTIONTEXT={year:"年份",month:"月",day:"日",hour:"时",minute:"分"},n.getMonthDays=function(t,e){var a=[31,28,31,30,31,30,31,31,30,31,30,31];return n.isLeapYear(t)&&(a[1]=29),a[e-1]},n.getNumStr=function(t){return 10>t?"0"+t:""+t},n.format=function(t,e){if(t){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in n)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return e}return""},n.prototype.init=function(e,a){if(this.$element=t(e),this.type=this.$element.data("toggle"),this.options=this.getOptions(a),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");this.options.current&&this.$element.val(n.format(new Date,"yyyy/MM/dd hh:mm"));var i=this.$element.attr("value")||this.$element.val();i&&(this.valueDate=new Date(i),this.year=this.valueDate.getFullYear(),this.month=this.valueDate.getMonth()+1,this.day=this.valueDate.getDate(),this.hour=this.valueDate.getHours(),this.minute=this.valueDate.getMinutes()),"timeSelect"===this.type?(this.initHour(),i&&this.initMinute()):(this.initYear(),i&&(this.initMonth(),this.initDay(),"datetimeSelect"===this.type&&(this.initHour(),this.initMinute()))),this.$element.closest("form").on("submit",function(){var e=t(this),n=!0;return t(".datetime-select",e).each(function(){var e=t(this);"-1"===e.val()&&(n=!1,e.closest(".form-group").removeClass("has-error").addClass("has-error"))}),n?void 0:!1})},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e)},n.prototype.initSelect=function(e,a,i){var o=this,r=e.dateModel,u=parseInt(o[r]);if(o["$"+r]&&(o["$"+r].remove(),o[r]=null),o["$"+r]=t("<select>"),o["$"+r].addClass("datetime-select").addClass("datetime-select-"+r),o.options.required&&o["$"+r].attr("required","required"),!o.options.current){var l=t('<option value="-1">'+n.OPTIONTEXT[r]+"</option>");o["$"+r].append(l)}for(var s=e.start;s>e.end;s--){var h=t('<option value="'+s+'">'+s+"</option>");(o.valueDate&&s===e.inputValue||u&&s===u)&&(h.attr("selected","selected"),o[r]=s),o["$"+r].append(h)}a(),o["$"+r].on("change",function(){var e=t(this),n=e.val();n>0?o[r]=n:o[r]=null,o.updateInputVlaue(),i&&i()}),o.updateInputVlaue()},n.prototype.initYear=function(){var t=this;t.initSelect({dateModel:"year",inputValue:t.valueDate?t.valueDate.getFullYear():-1,currentValue:(new Date).getFullYear(),start:t.options.maxyear,end:t.options.minyear},function(){t.$element.before(t.$year)},function(){t.year&&!t.month?t.initMonth():t.year&&t.month&&2===parseInt(t.month)&&t.initDay()})},n.prototype.initMonth=function(){var t=this;t.initSelect({dateModel:"month",inputValue:t.valueDate?t.valueDate.getMonth()+1:-1,currentValue:(new Date).getMonth()+1,start:12,end:0},function(){t.$year.after(t.$month)},function(){var e=!1;if(t.month&&!t.day)t.initDay(),e=!0;else if(t.month&&t.day){var a=n.getMonthDays(t.year,t.month);parseInt(t.$day.data("monthDays"))!==a&&(t.initDay(),e=!0)}})},n.prototype.initDay=function(){var t=this,e=n.getMonthDays(t.year,t.month);t.initSelect({dateModel:"day",inputValue:t.valueDate?t.valueDate.getDate():-1,currentValue:(new Date).getDate(),start:e,end:0},function(){t.$month.after(t.$day),t.$day.data("monthDays",e)},function(){t.day&&!t.hour&&"datetimeSelect"===t.type&&t.initHour()})},n.prototype.initHour=function(){var t=this;t.initSelect({dateModel:"hour",inputValue:t.valueDate?t.valueDate.getHours():-1,currentValue:(new Date).getHours(),start:23,end:-1},function(){"timeSelect"===t.type?t.$element.before(t.$hour):t.$day.after(t.$hour)},function(){t.hour&&!t.minute&&t.initMinute()})},n.prototype.initMinute=function(){var t=this;t.initSelect({dateModel:"minute",inputValue:t.valueDate?t.valueDate.getMinutes():-1,currentValue:(new Date).getMinutes(),start:59,end:-1},function(){t.$hour.after(t.$minute)})},n.isLeapYear=function(t){return t%4===0||t%100===0&&t%400===0},n.prototype.updateInputVlaue=function(){var t=this,e=t.type;t.hour||"datetimeSelect"!==e&&"timeSelect"!==e||(t.minute=null,t.$minute&&t.$minute.remove()),t.month||"datetimeSelect"!==e&&"dateSelect"!==e||(t.day=null,t.$day&&t.$day.remove()),t.year||"datetimeSelect"!==e&&"dateSelect"!==e||(t.month=null,t.$month&&t.$month.remove()),"datetimeSelect"===e&&t.year&&t.month&&t.day&&t.minute&&t.hour?t.$element.val(t.year+"/"+n.getNumStr(t.month)+"/"+n.getNumStr(t.day)+" "+n.getNumStr(t.hour)+":"+n.getNumStr(t.minute)):"dateSelect"===e&&t.year&&t.month&&t.day?t.$element.val(t.year+"/"+n.getNumStr(t.month)+"/"+n.getNumStr(t.day)):"timeSelect"===e&&t.minute&&t.hour?t.$element.val("1970/01/01 "+n.getNumStr(t.hour)+":"+n.getNumStr(t.minute)):t.$element.val("")},n.prototype.destroy=function(){var t=this,e=t.options.type;t.$year&&t.$year.remove(),t.$month&&t.$month.remove(),t.$day&&t.$day.remove(),t.$hour&&t.$hour.remove(),t.$minute&&t.$minute.remove(),t.$element.off("."+e).removeData("ls."+e)};var a=t.fn.datetimeSelect;t.fn.datetimeSelect=e,t.fn.datetimeSelect.Constructor=n,t.fn.datetimeSelect.noConflict=function(){return t.fn.datetimeSelect=a,this},t(window).on("load",function(){t('[data-toggle="datetimeSelect"],[data-toggle="timeSelect"],[data-toggle="dateSelect"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery);